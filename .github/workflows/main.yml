name: æ¯æ—¥åŒ¯ç‡æ›´æ–°æ©Ÿå™¨äºº

on:
  # ç§»é™¤ schedule æ’ç¨‹ï¼Œåƒ…ä¿ç•™æ‰‹å‹•/API è§¸ç™¼
  workflow_dispatch: # è®“ä½ å¯ä»¥æ‰‹å‹•æŒ‰æŒ‰éˆ•æ¸¬è©¦ï¼Œæˆ–è®“ Google Script é€é API è§¸ç™¼

jobs:
  build:
    runs-on: ubuntu-latest
    permissions:
      contents: write # çµ¦äºˆå¯«å…¥æ¬Šé™

    steps:
      - name: ä¸‹è¼‰ç¨‹å¼ç¢¼ (Checkout)
        uses: actions/checkout@v3

      - name: è¨­å®š Python ç’°å¢ƒ
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      - name: å®‰è£å¥—ä»¶
        run: |
          pip install -r requirements.txt

      - name: åŸ·è¡Œçˆ¬èŸ² (Run Crawler)
        run: |
          python run.py

      - name: ä¿å­˜è³‡æ–™å› GitHub (Commit & Push)
        uses: stefanzweifel/git-auto-commit-action@v4
        with:
          commit_message: "ğŸ¤– è‡ªå‹•æ›´æ–°åŒ¯ç‡è³‡æ–™"
          file_pattern: data.json
